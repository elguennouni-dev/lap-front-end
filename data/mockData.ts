import { User, UserRole, Order, OrderStatus, Customer, Product, OrderItem, TaskStatus, Task } from '../types';

export const MOCK_USERS: User[] = [
  { 
    user_id: 1, 
    username: 'admin', 
    email: 'admin@lapsystem.ma', 
    password_hash: 'hashed_password_123',
    first_name: 'Abdessatar', 
    last_name: 'Chtina', 
    phone: '+212 6 00 00 00 01',
    avatar_url: null,
    roles: [UserRole.ADMIN], 
    is_active: true,
    last_login: '2024-03-15T09:00:00Z',
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-03-15T09:00:00Z'
  },
  { 
    user_id: 2, 
    username: 'commercial', 
    email: 'commercial@lapsystem.ma', 
    password_hash: 'hashed_password_123',
    first_name: 'Salma', 
    last_name: 'Ouassini', 
    phone: '+212 6 00 00 00 02',
    avatar_url: null,
    roles: [UserRole.COMMERCIAL], 
    is_active: true,
    last_login: '2024-03-15T08:30:00Z',
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-03-15T08:30:00Z'
  },
  { 
    user_id: 3, 
    username: 'designer1', 
    email: 'design1@lapsystem.ma', 
    password_hash: 'hashed_password_123',
    first_name: 'Hicham', 
    last_name: 'Berrada', 
    phone: '+212 6 00 00 00 03',
    avatar_url: null,
    roles: [UserRole.DESIGNER], 
    is_active: true,
    last_login: '2024-03-14T16:45:00Z',
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-03-14T16:45:00Z'
  },
  { 
    user_id: 4, 
    username: 'designer2', 
    email: 'design2@lapsystem.ma', 
    password_hash: 'hashed_password_123',
    first_name: 'Imane', 
    last_name: 'Skalli', 
    phone: '+212 6 00 00 00 04',
    avatar_url: null,
    roles: [UserRole.DESIGNER], 
    is_active: true,
    last_login: '2024-03-14T17:20:00Z',
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-03-14T17:20:00Z'
  },
  { 
    user_id: 5, 
    username: 'imprimeur1', 
    email: 'print1@lapsystem.ma', 
    password_hash: 'hashed_password_123',
    first_name: 'Mohamed', 
    last_name: 'Kadiri', 
    phone: '+212 6 00 00 00 05',
    avatar_url: null,
    roles: [UserRole.IMPRIMEUR], 
    is_active: true,
    last_login: '2024-03-15T07:15:00Z',
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-03-15T07:15:00Z'
  },
  { 
    user_id: 6, 
    username: 'imprimeur2', 
    email: 'print2@lapsystem.ma', 
    password_hash: 'hashed_password_123',
    first_name: 'Rachid', 
    last_name: 'Aarab', 
    phone: '+212 6 00 00 00 06',
    avatar_url: null,
    roles: [UserRole.IMPRIMEUR], 
    is_active: true,
    last_login: '2024-03-15T07:30:00Z',
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-03-15T07:30:00Z'
  },
  { 
    user_id: 7, 
    username: 'logistique1', 
    email: 'logistique@lapsystem.ma', 
    password_hash: 'hashed_password_123',
    first_name: 'Karim', 
    last_name: 'Tazi', 
    phone: '+212 6 00 00 00 07',
    avatar_url: null,
    roles: [UserRole.LOGISTIQUE], 
    is_active: true,
    last_login: '2024-03-15T08:00:00Z',
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-03-15T08:00:00Z'
  },
];

export const MOCK_CUSTOMERS: Customer[] = [
  { 
    customer_id: 1, 
    customer_type: 'Entreprise',
    company_name: 'Al Baraka Market', 
    contact_name: 'Khalid Benali', 
    email: 'khalid@albaraka.ma',
    phone: '+212 6 12 34 56 78',
    address: '123 Avenue Hassan II',
    city: 'Casablanca',
    postal_code: '20000',
    country: 'Maroc',
    tax_id: '123456789',
    created_by: 1,
    assigned_imprimeur_id: null,
    created_at: '2024-01-15T10:00:00Z',
    updated_at: '2024-01-15T10:00:00Z'
  },
  { 
    customer_id: 2, 
    customer_type: 'Entreprise',
    company_name: 'TechPlus Rabat', 
    contact_name: 'Amina El Fassi', 
    email: 'amina@techplus.ma',
    phone: '+212 6 98 76 54 32',
    address: '45 Rue Mohammed V',
    city: 'Rabat',
    postal_code: '10000',
    country: 'Maroc',
    tax_id: '987654321',
    created_by: 1,
    assigned_imprimeur_id: null,
    created_at: '2024-01-20T14:30:00Z',
    updated_at: '2024-01-20T14:30:00Z'
  },
  { 
    customer_id: 3, 
    customer_type: 'Administration',
    company_name: 'Ministère de la Culture', 
    contact_name: 'Dr. Hassan Berrada', 
    email: 'h.berrada@culture.gov.ma',
    phone: '+212 5 37 20 10 20',
    address: 'Complexe Administratif, Quartier Administratif',
    city: 'Rabat',
    postal_code: '10000',
    country: 'Maroc',
    tax_id: 'GOV123456',
    created_by: 1,
    assigned_imprimeur_id: null,
    created_at: '2024-02-01T09:15:00Z',
    updated_at: '2024-02-01T09:15:00Z'
  },
  { 
    customer_id: 4, 
    customer_type: 'Particulier',
    company_name: 'Studio Créatif Sarah', 
    contact_name: 'Sarah Mounir', 
    email: 'sarah@studiocreatif.ma',
    phone: '+212 6 55 44 33 22',
    address: 'Résidence Les Jardins, Appt 45',
    city: 'Marrakech',
    postal_code: '40000',
    country: 'Maroc',
    tax_id: 'PART123456',
    created_by: 2,
    assigned_imprimeur_id: null,
    created_at: '2024-02-10T16:45:00Z',
    updated_at: '2024-02-10T16:45:00Z'
  },
  { 
    customer_id: 5, 
    customer_type: 'Entreprise',
    company_name: 'Restaurant Dar Tajine', 
    contact_name: 'Mohammed Alami', 
    email: 'contact@dartajine.ma',
    phone: '+212 5 24 44 55 66',
    address: 'Place Jemaa el-Fna',
    city: 'Marrakech',
    postal_code: '40000',
    country: 'Maroc',
    tax_id: 'TAJINE789',
    created_by: 2,
    assigned_imprimeur_id: null,
    created_at: '2024-02-15T11:20:00Z',
    updated_at: '2024-02-15T11:20:00Z'
  },
  { 
    customer_id: 6, 
    customer_type: 'Entreprise',
    company_name: 'Agence Immobilière Prestige', 
    contact_name: 'Fatima Zahra', 
    email: 'fzahra@prestige-immo.ma',
    phone: '+212 6 77 88 99 00',
    address: 'Tour Hassan, 25ème étage',
    city: 'Casablanca',
    postal_code: '20000',
    country: 'Maroc',
    tax_id: 'IMMO456789',
    created_by: 1,
    assigned_imprimeur_id: null,
    created_at: '2024-02-20T13:10:00Z',
    updated_at: '2024-02-20T13:10:00Z'
  },
  { 
    customer_id: 7, 
    customer_type: 'Particulier',
    company_name: 'Événements Mariage & Célébrations', 
    contact_name: 'Leila Chraibi', 
    email: 'leila@mariage-celebrations.ma',
    phone: '+212 6 11 22 33 44',
    address: 'Villa 12, Quartier Palmier',
    city: 'Agadir',
    postal_code: '80000',
    country: 'Maroc',
    tax_id: 'EVENT123789',
    created_by: 2,
    assigned_imprimeur_id: null,
    created_at: '2024-03-01T15:30:00Z',
    updated_at: '2024-03-01T15:30:00Z'
  },
  { 
    customer_id: 8, 
    customer_type: 'Entreprise',
    company_name: 'Pharmacie Centrale', 
    contact_name: 'Dr. Karim Bennis', 
    email: 'kbennis@pharmacie-centrale.ma',
    phone: '+212 5 22 30 40 50',
    address: 'Boulevard Mohammed V',
    city: 'Fès',
    postal_code: '30000',
    country: 'Maroc',
    tax_id: 'PHARMA456123',
    created_by: 1,
    assigned_imprimeur_id: null,
    created_at: '2024-03-05T08:45:00Z',
    updated_at: '2024-03-05T08:45:00Z'
  }
];

export const MOCK_PRODUCTS: Product[] = [
  { 
    product_id: 1, 
    product_code: 'CARTE-001',
    product_name: 'Cartes de visite (x500)', 
    description: 'Cartes de visite professionnelles, impression recto verso, papier couché 300g',
    category: 'Papeterie',
    unit_price: 120,
    tx_tva: 20,
    is_active: true,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z'
  },
  { 
    product_id: 2, 
    product_code: 'FLYER-001',
    product_name: 'Flyers A5 (x1000)', 
    description: 'Flyers promotionnels format A5, impression quadrichromie, papier couché 135g',
    category: 'Impression',
    unit_price: 250,
    tx_tva: 20,
    is_active: true,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z'
  },
  { 
    product_id: 3, 
    product_code: 'ROLL-001',
    product_name: 'Roll-up 85x200cm', 
    description: 'Roll-up publicitaire 85x200cm, impression haute définition, système dépliable',
    category: 'Signalétique',
    unit_price: 300,
    tx_tva: 20,
    is_active: true,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z'
  },
  { 
    product_id: 4, 
    product_code: 'AFF-001',
    product_name: 'Affiche A3', 
    description: 'Affiche format A3, impression haute qualité, papier couché 170g',
    category: 'Impression',
    unit_price: 45,
    tx_tva: 20,
    is_active: true,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z'
  },
  { 
    product_id: 5, 
    product_code: 'STICK-001',
    product_name: 'Autocollants (x100)', 
    description: 'Autocollants personnalisés, vinyle adhésif, diverses formes et tailles',
    category: 'Signalétique',
    unit_price: 80,
    tx_tva: 20,
    is_active: true,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z'
  }
];

const generateItems = (productId: number, quantity: number): OrderItem => {
    const product = MOCK_PRODUCTS.find(p => p.product_id === productId);
    if (!product) throw new Error("Product not found");
    return {
        order_item_id: Date.now() + Math.random(),
        order_id: 0,
        product_id: productId,
        quantity,
        unit_price: product.unit_price,
        total_price: product.unit_price * quantity,
        specifications: '',
        panneaux: [],
        created_at: new Date().toISOString()
    }
};

const generateTask = (taskId: number, orderId: number, stepName: string, assignedTo: number, assignedBy: number, status: TaskStatus): Task => {
  return {
    task_id: taskId,
    order_id: orderId,
    step_id: stepName === 'Design' ? 1 : 2,
    step_name: stepName,
    assigned_to: assignedTo,
    assigned_by: assignedBy,
    status: status,
    start_date: status !== TaskStatus.PENDING ? new Date().toISOString() : null,
    end_date: status === TaskStatus.COMPLETED ? new Date().toISOString() : null,
    real_hours: status === TaskStatus.COMPLETED ? (stepName === 'Design' ? 6 : 14) : null,
    comments: '',
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString()
  };
};

export const MOCK_ORDERS: Order[] = [
    {
        order_id: 1,
        order_number: 'Projet de LAP',
        customer_id: 1,
        status: OrderStatus.NEW_ORDER,
        priority: 'Normale',
        order_date: '2024-02-12T10:00:00Z',
        subtotal_amount: 370,
        tax_amount: 74,
        total_amount: 444,
        created_by: 2,
        assigned_designer_id: null,
        assigned_imprimeur_id: null,
        is_required: true,
        created_at: '2024-02-12T10:00:00Z',
        updated_at: '2024-02-12T10:00:00Z',
        items: [generateItems(1, 1), generateItems(2, 1)],
        tasks: [],
        // New fields
        commercial: 'Salma Ouassini',
        nom_propriete: 'Résidence Al Manar',
        zone: 'R2',
        type_panneau: 'Panneau',
        avec_logo: 'Avec',
        support: 'Bois',
        nom_a_afficher: 'Al Baraka Market',
        panneaux: [{ id: 1, taille_h: '200', taille_v: '100', contenu: ['Millenium', 'Galaxy'] }]
    },
    {
        order_id: 2,
        order_number: 'CMD-002',
        customer_id: 2,
        status: OrderStatus.DESIGN_ASSIGNED,
        priority: 'Urgente',
        order_date: '2024-02-10T11:00:00Z',
        subtotal_amount: 300,
        tax_amount: 60,
        total_amount: 360,
        created_by: 2,
        assigned_designer_id: 3,
        assigned_imprimeur_id: null,
        is_required: true,
        created_at: '2024-02-10T11:00:00Z',
        updated_at: '2024-02-10T11:00:00Z',
        items: [generateItems(3, 1)],
        tasks: [generateTask(1, 2, 'Design', 3, 1, TaskStatus.PENDING)],
        // New fields
        commercial: 'Salma Ouassini',
        nom_propriete: 'TechPlus HQ',
        zone: 'R1',
        type_panneau: 'Oneway',
        avec_logo: 'Avec',
        support: 'Forex',
        nom_a_afficher: 'TechPlus Rabat',
        panneaux: [{ id: 2, taille_h: '150', taille_v: '150', contenu: ['Azur'] }]
    },
    {
        order_id: 3,
        order_number: 'CMD-003',
        customer_id: 1,
        status: OrderStatus.DESIGN_PENDING_APPROVAL,
        priority: 'Normale',
        order_date: '2024-02-09T12:00:00Z',
        subtotal_amount: 240,
        tax_amount: 48,
        total_amount: 288,
        created_by: 2,
        assigned_designer_id: 4,
        assigned_imprimeur_id: null,
        is_required: true,
        created_at: '2024-02-09T12:00:00Z',
        updated_at: '2024-02-09T12:00:00Z',
        items: [generateItems(1, 2)],
        tasks: [generateTask(2, 3, 'Design', 4, 1, TaskStatus.COMPLETED)],
        // New fields
        commercial: 'Salma Ouassini',
        nom_propriete: 'Annexe 2',
        zone: 'R3',
        type_panneau: 'Panneau',
        avec_logo: 'Sans',
        support: 'Bois',
        nom_a_afficher: 'Direction',
        panneaux: []
    },
    {
        order_id: 4,
        order_number: 'CMD-004',
        customer_id: 2,
        status: OrderStatus.DESIGN_APPROVED,
        priority: 'Prioritaire',
        order_date: '2024-02-08T14:00:00Z',
        subtotal_amount: 500,
        tax_amount: 100,
        total_amount: 600,
        created_by: 2,
        assigned_designer_id: 3,
        assigned_imprimeur_id: null,
        is_required: true,
        created_at: '2024-02-08T14:00:00Z',
        updated_at: '2024-02-08T14:00:00Z',
        items: [generateItems(2, 2)],
        tasks: [generateTask(3, 4, 'Design', 3, 1, TaskStatus.COMPLETED)],
        // New fields
        commercial: 'Salma Ouassini',
        nom_propriete: 'Showroom',
        zone: 'R5',
        type_panneau: 'Oneway',
        avec_logo: 'Avec',
        support: 'Forex',
        nom_a_afficher: 'Promo Hiver',
        panneaux: [{ id: 3, taille_h: '300', taille_v: '100', contenu: ['Lumi-lap', 'Platinium'] }]
    },
    {
        order_id: 5,
        order_number: 'CMD-005',
        customer_id: 1,
        status: OrderStatus.PRODUCTION_COMPLETE,
        priority: 'Normale',
        order_date: '2024-02-06T15:00:00Z',
        subtotal_amount: 900,
        tax_amount: 180,
        total_amount: 1080,
        created_by: 2,
        assigned_designer_id: 4,
        assigned_imprimeur_id: 5,
        is_required: true,
        created_at: '2024-02-06T15:00:00Z',
        updated_at: '2024-02-06T15:00:00Z',
        items: [generateItems(3, 3)],
        tasks: [
            generateTask(4, 5, 'Design', 4, 1, TaskStatus.COMPLETED),
            generateTask(5, 5, 'Production', 5, 1, TaskStatus.COMPLETED)
        ],
        // New fields
        commercial: 'Salma Ouassini',
        nom_propriete: 'Entrée Principale',
        zone: 'R0',
        type_panneau: 'Panneau',
        avec_logo: 'Avec',
        support: 'Bois',
        nom_a_afficher: 'Bienvenue',
        panneaux: [{ id: 4, taille_h: '100', taille_v: '200', contenu: ['Millenium'] }]
    },
    {
        order_id: 6,
        order_number: 'CMD-006',
        customer_id: 2,
        status: OrderStatus.COMPLETED,
        priority: 'Urgente',
        order_date: '2024-02-01T16:00:00Z',
        subtotal_amount: 120,
        tax_amount: 24,
        total_amount: 144,
        created_by: 2,
        assigned_designer_id: 3,
        assigned_imprimeur_id: 6,
        is_required: true,
        created_at: '2024-02-01T16:00:00Z',
        updated_at: '2024-02-01T16:00:00Z',
        items: [generateItems(1, 1)],
        tasks: [
            generateTask(6, 6, 'Design', 3, 1, TaskStatus.COMPLETED),
            generateTask(7, 6, 'Production', 6, 1, TaskStatus.COMPLETED)
        ],
        // New fields
        commercial: 'Salma Ouassini',
        nom_propriete: 'Bureau 12',
        zone: 'R6',
        type_panneau: 'Oneway',
        avec_logo: 'Sans',
        support: 'Forex',
        nom_a_afficher: 'Privé',
        panneaux: []
    }
];